<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Class Based Cifrari</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
    }

    #contenitore {
      max-height: 100vh;
      overflow-y: scroll;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: #f0f0f0;
    }

    .modulo {
      background-color: #ffffff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .modulo:hover {
      transform: scale(1.02);
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .overlay.active {
      display: flex;
    }

    .overlay-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      position: relative;
      min-width: 300px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .overlay-content input {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .overlay-content button {
      padding: 10px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .overlay-content button:hover {
      background-color: #0056b3;
    }

    .close-btn {
      position: absolute;
      top: 8px;
      right: 10px;
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <div id="contenitore"></div>

  <script>
    class GestoreCifrari {
        constructor(containerId) {
            this.container = document.getElementById(containerId);
            this.moduli = [];
            this.passwordCorrente = null;
            this.overlay = null;
            this.passwordInput = null;
        }

        creaOverlay() {
            // Crea struttura overlay
            this.overlay = document.createElement('div');
            this.overlay.classList.add('overlay');

            // Dichiarazione del contenuto
            const content = document.createElement('div');
            content.classList.add('overlay-content');

            // Creazione del bottone di chiusura, gli viene associato anche la funzione di chiusura
            const closeBtn = document.createElement('span');
            closeBtn.textContent = '√ó';
            closeBtn.classList.add('close-btn');
            closeBtn.onclick = () => this.chiudiOverlay();

            // Viene creato l'input tag per l'inserimento della password
            this.passwordInput = document.createElement('input');
            this.passwordInput.type = 'password';
            this.passwordInput.placeholder = 'Inserisci password';

            // Viene creato il bottone per controllare se la password √® corretta
            // Viene anche associata l'azione
            const verificaBtn = document.createElement('button');
            verificaBtn.textContent = 'Verifica';
            verificaBtn.onclick = () => this.verificaPassword();

            // Vengono dichiarate le gerarchie del DOM
            content.appendChild(closeBtn);
            content.appendChild(this.passwordInput);
            content.appendChild(verificaBtn);
            this.overlay.appendChild(content);
            document.body.appendChild(this.overlay);
            
        }

        creaModulo(nome, password) {
            const modulo = document.createElement('div');
            modulo.classList.add('modulo');
            modulo.textContent = `cifrario: '${nome}'`;

            modulo.addEventListener('click', () => {
                this.mostraOverlay(password);
            });

            this.container.appendChild(modulo);
            this.moduli.push({ nome, password, elemento: modulo });
        }

        mostraOverlay(password) {
            this.passwordCorrente = password;
            this.passwordInput.value = '';
            this.overlay.classList.add('active');
        }

        chiudiOverlay() {
            this.overlay.classList.remove('active');
        }

        verificaPassword() {
            const inserita = this.passwordInput.value;
            if (inserita === this.passwordCorrente) {
                console.log('‚úÖ Password corretta!');
                this.chiudiOverlay();
            } else {
            console.log('‚ùå Password errata!');
            }
        }
    }

    // üß™ ESEMPIO DI USO
    const gestore = new GestoreCifrari('contenitore');
    gestore.creaOverlay();
    gestore.creaModulo('Modulo1', '1234');
    gestore.creaModulo('AccessoAdmin', 'admin');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
    gestore.creaModulo('Segreto', 'banana');
  </script>
</body>
</html>
